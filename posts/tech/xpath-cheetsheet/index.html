<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>xpath基本使用 | Niuhe&#39;s Blog</title>
<meta name="keywords" content="Xpath">
<meta name="description" content="记录常用的xpath匹配方式">
<meta name="author" content="Niuhe">
<link rel="canonical" href="https://blog.niuhemoon.win/posts/tech/xpath-cheetsheet/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://blog.niuhemoon.win/base/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://blog.niuhemoon.win/base/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://blog.niuhemoon.win/base/favicon.ico">
<link rel="apple-touch-icon" href="https://blog.niuhemoon.win/base/avatar.jpeg">
<link rel="mask-icon" href="https://blog.niuhemoon.win/base/avatar.jpeg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-116933089-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="xpath基本使用" />
<meta property="og:description" content="记录常用的xpath匹配方式" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.niuhemoon.win/posts/tech/xpath-cheetsheet/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-09-03T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="xpath基本使用"/>
<meta name="twitter:description" content="记录常用的xpath匹配方式"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "📚文章",
      "item": "https://blog.niuhemoon.win/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "👨🏻‍💻 技术",
      "item": "https://blog.niuhemoon.win/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "xpath基本使用",
      "item": "https://blog.niuhemoon.win/posts/tech/xpath-cheetsheet/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "xpath基本使用",
  "name": "xpath基本使用",
  "description": "记录常用的xpath匹配方式",
  "keywords": [
    "Xpath"
  ],
  "articleBody": "介绍 Xpath全称XML Path Language，功能上使用类似路径的语法来识别和导航XML文档中的节点，同时支持HTML语言。XPath是W3C的推荐标准\nNodes Xpath中有七种节点：\nelement attribute text namespace processing-instruction comment root nodes 句法 选中Nodes 表达式 描述 nodename 选中所有同名节点 / 从root node开始选择 // 从当前节点开始选择，不管层级关系 . 选择当前节点 .. 选择当前节点的父节点 @ 选择属性 举例如下\n表达式 效果 bookstore Selects all nodes with the name “bookstore” /bookstore Selects the root element bookstore bookstore/book Selects all book elements that are children of bookstore //book Selects all book elements no matter where they are in the document bookstore//book Selects all book elements that are descendant of the bookstore element, no matter where they are under the bookstore element //@lang Selects all attributes that are named lang Predicates 谓词 Path Expression Result /bookstore/book[1] Selects the first book element that is the child of the bookstore element. /bookstore/book[last()] Selects the last book element that is the child of the bookstore element /bookstore/book[last()-1] Selects the last but one book element that is the child of the bookstore element /bookstore/book[position()\u003c3] Selects the first two book elements that are children of the bookstore element //title[@lang] Selects all the title elements that have an attribute named lang //title[@lang=‘en’] Selects all the title elements that have a “lang” attribute with a value of “en” /bookstore/book[price\u003e35.00] Selects all the book elements of the bookstore element that have a price element with a value greater than 35.00 /bookstore/book[price\u003e35.00]/title Selects all the title elements of the book elements of the bookstore element that have a price element with a value greater than 35.00 选择未知节点 Wildcard Description * Matches any element node @* Matches any attribute node node() Matches any node of any kind Path Expression Result /bookstore/* Selects all the child element nodes of the bookstore element //* Selects all elements in the document //title[@*] Selects all title elements which have at least one attribute of any kind 选择多条路径 通过使用|或操作符，可以选择多条路径\nPath Expression Result //book/title | //book/price Selects all the title AND price elements of all book elements //title | //price Selects all the title AND price elements in the document /bookstore/book/title | //price Selects all the title elements of the book element of the bookstore element AND all the price elements in the document Axes Axes(轴)用来表示和当前节点之间的关系，用于定位树上当前节点的关联节点\nAxisName Result ancestor Selects all ancestors (parent, grandparent, etc.) of the current node ancestor-or-self Selects all ancestors (parent, grandparent, etc.) of the current node and the current node itself attribute Selects all attributes of the current node child Selects all children of the current node descendant Selects all descendants (children, grandchildren, etc.) of the current node descendant-or-self Selects all descendants (children, grandchildren, etc.) of the current node and the current node itself following Selects everything in the document after the closing tag of the current node following-sibling Selects all siblings after the current node namespace Selects all namespace nodes of the current node parent Selects the parent of the current node preceding Selects all nodes that appear before the current node in the document, except ancestors, attribute nodes and namespace nodes preceding-sibling Selects all siblings before the current node self Selects the current node 路径定位表达式 绝对路径以/开头 定位的语法如下：axisname::nodetest[predicate] Axisname轴名称 Nodetest节点选择 Predicate 谓词细化选择 Example Result child::book Selects all book nodes that are children of the current node attribute::lang Selects the lang attribute of the current node child::* Selects all element children of the current node attribute::* Selects all attributes of the current node child::text() Selects all text node children of the current node child::node() Selects all children of the current node descendant::book Selects all book descendants of the current node ancestor::book Selects all book ancestors of the current node ancestor-or-self::book Selects all book ancestors of the current node - and the current as well if it is a book node child::*/child::price Selects all price grandchildren of the current node 操作符 Xpath操作符可以返回如下类型的值：\nnode-set string number boolean Operator Description Example | Computes two node-sets //book | //cd + Addition 6 + 4 - Subtraction 6 - 4 * Multiplication 6 * 4 div Division 8 div 4 = Equal price=9.80 != Not equal price!=9.80 \u003c Less than price\u003c9.80 \u003c= Less than or equal to price\u003c=9.80 \u003e Greater than price\u003e9.80 \u003e= Greater than or equal to price\u003e=9.80 or or price=9.80 or price=9.70 and and price\u003e9.00 and price\u003c9.90 mod Modulus (division remainder) 5 mod 2 Functions函数 函数 作用 name() 获取node的名称//[starts-with(name(), ‘h’)] text() 获取node的文本//button[text()=“Submit”] lang(str) 获取字符串的语言 count() node计数//table[count(tr)=1] position() 计算位置//ol/li[position()=2] number() boolean() not() 取反button[not(starts-with(text(),“Submit”))] contains() 字符串包含font[contains(@class,“head”)] starts-with() font[starts-with(@class,“head”)] ends-with() font[ends-with(@class,“head”)] concat(x, y) substring(str, start, len) 浏览器使用示例 chrome浏览器有两种使用方法：\nDevtool-Elements, CTRL+F Devtool-Console, $x(xpath_syntax) 案例 解释 /bookstore/book/title 选择所有书的title /bookstore/book[1]/title 选择第一本书的title /bookstore/book/price[text()] 选择所有书的价格 /bookstore/book[price\u003e35]/price 选择价格大于35的price节点 /bookstore/book[price\u003e35]/title 选择价格大于35的title节点 $x('//bookstore/book/title') (4) [title, title, title, title] $x('//bookstore/book[1]/title') [title] $x('//bookstore/book[position() \u003e 2]/title') (2) [title, title] $x('//bookstore/book[price \u003e 30]/title') (2) [title, title] $x('.//bookstore/book[1]/price')[0].textContent '30.00' $x('.//bookstore/book[1]/price[text()]')[0].textContent '30.00' $x('.//bookstore/book[1]/price/text()')[0].textContent '30.00' $x('.//bookstore/book[@id=\"testid\"]/title')[0].textContent 'Everyday Italian' $x('.//bookstore/book[@class=\"testclass\"]/title')[0].textContent 'Harry Potter' $x('.//bookstore/book[contains(@class, \"test\")]/title')[0].textContent 'Harry Potter' Xpath测试html打开开发者工具可以试验 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e Everyday Italian Giada De Laurentiis 2005 30.00 Harry Potter J K. Rowling 2005 29.99 XQuery Kick Start James McGovern Per Bothner Kurt Cagle James Linn Vaidyanathan Nagarajan 2003 49.99 Learning XML Erik T. Ray 2003 39.95 \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003cbookstore\u003e \u003cbook id=\"testid\" category=\"cooking\"\u003e \u003ctitle lang=\"en\"\u003eEveryday Italian\u003c/title\u003e \u003cauthor\u003eGiada De Laurentiis\u003c/author\u003e \u003cyear\u003e2005\u003c/year\u003e \u003cprice\u003e30.00\u003c/price\u003e \u003c/book\u003e \u003cbook class=\"testclass\" category=\"children\"\u003e \u003ctitle lang=\"en\" href=\"test.pdf\"\u003eHarry Potter\u003c/title\u003e \u003cauthor\u003eJ K. Rowling\u003c/author\u003e \u003cyear\u003e2005\u003c/year\u003e \u003cprice\u003e29.99\u003c/price\u003e \u003c/book\u003e \u003cbook category=\"web\"\u003e \u003ctitle lang=\"en\" href=\"/test\"\u003eXQuery Kick Start\u003c/title\u003e \u003cauthor\u003eJames McGovern\u003c/author\u003e \u003cauthor\u003ePer Bothner\u003c/author\u003e \u003cauthor\u003eKurt Cagle\u003c/author\u003e \u003cauthor\u003eJames Linn\u003c/author\u003e \u003cauthor\u003eVaidyanathan Nagarajan\u003c/author\u003e \u003cyear\u003e2003\u003c/year\u003e \u003cprice\u003e49.99\u003c/price\u003e \u003c/book\u003e \u003cbook category=\"web\"\u003e \u003ctitle lang=\"en\" href=\"https://www.google.com\"\u003eLearning XML\u003c/title\u003e \u003cauthor\u003eErik T. Ray\u003c/author\u003e \u003cyear\u003e2003\u003c/year\u003e \u003cprice\u003e39.95\u003c/price\u003e \u003c/book\u003e \u003c/bookstore\u003e 参考 Xpath cheatsheet\nXPath Tutorial\n",
  "wordCount" : "1532",
  "inLanguage": "zh",
  "datePublished": "2023-09-03T00:00:00Z",
  "dateModified": "2023-09-03T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Niuhe"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://blog.niuhemoon.win/posts/tech/xpath-cheetsheet/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Niuhe's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://blog.niuhemoon.win/base/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://blog.niuhemoon.win" accesskey="h" title="Niuhe&#39;s Blog (Alt + H)">
                <img src="https://blog.niuhemoon.win/base/avatar.jpeg" alt="" aria-label="logo"
                    height="35">Niuhe&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://blog.niuhemoon.win/search" title="🔍搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍搜索</span>
                </a>
            </li>
            <li>
                <a href="https://blog.niuhemoon.win/" title="🏠主页">
                    <span>🏠主页</span>
                </a>
            </li>
            <li>
                <a href="https://blog.niuhemoon.win/posts" title="📚文章">
                    <span>📚文章</span>
                </a>
            </li>
            <li>
                <a href="https://blog.niuhemoon.win/tags" title="🔖标签">
                    <span>🔖标签</span>
                </a>
            </li>
            <li>
                <a href="https://blog.niuhemoon.win/archives/" title="⏱时间轴">
                    <span>⏱时间轴</span>
                </a>
            </li>
            <li>
                <a href="https://blog.niuhemoon.win/about" title="🙋🏻‍♂️关于">
                    <span>🙋🏻‍♂️关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://blog.niuhemoon.win">🏠主页</a>&nbsp;»&nbsp;<a href="https://blog.niuhemoon.win/posts/">📚文章</a>&nbsp;»&nbsp;<a href="https://blog.niuhemoon.win/posts/tech/">👨🏻‍💻 技术</a></div>
    <h1 class="post-title">
      xpath基本使用
    </h1>
    <div class="post-description">
      记录常用的xpath匹配方式
    </div>
    <div class="post-meta"><span title='2023-09-03 00:00:00 +0000 UTC'>2023-09-03</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;1532 字&nbsp;·&nbsp;Niuhe

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">文章目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e4%bb%8b%e7%bb%8d" aria-label="介绍">介绍</a></li>
                <li>
                    <a href="#nodes" aria-label="Nodes">Nodes</a></li>
                <li>
                    <a href="#%e5%8f%a5%e6%b3%95" aria-label="句法">句法</a><ul>
                        
                <li>
                    <a href="#%e9%80%89%e4%b8%adnodes" aria-label="选中Nodes">选中Nodes</a></li>
                <li>
                    <a href="#predicates-%e8%b0%93%e8%af%8d" aria-label="Predicates 谓词">Predicates 谓词</a></li>
                <li>
                    <a href="#%e9%80%89%e6%8b%a9%e6%9c%aa%e7%9f%a5%e8%8a%82%e7%82%b9" aria-label="选择未知节点">选择未知节点</a></li>
                <li>
                    <a href="#%e9%80%89%e6%8b%a9%e5%a4%9a%e6%9d%a1%e8%b7%af%e5%be%84" aria-label="选择多条路径">选择多条路径</a></li></ul>
                </li>
                <li>
                    <a href="#axes" aria-label="Axes">Axes</a><ul>
                        <ul>
                        
                <li>
                    <a href="#%e8%b7%af%e5%be%84%e5%ae%9a%e4%bd%8d%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="路径定位表达式">路径定位表达式</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#%e6%93%8d%e4%bd%9c%e7%ac%a6" aria-label="操作符">操作符</a></li>
                <li>
                    <a href="#functions%e5%87%bd%e6%95%b0" aria-label="Functions函数">Functions函数</a><ul>
                        
                <li>
                    <a href="#%e6%b5%8f%e8%a7%88%e5%99%a8%e4%bd%bf%e7%94%a8%e7%a4%ba%e4%be%8b" aria-label="浏览器使用示例">浏览器使用示例</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%8f%82%e8%80%83" aria-label="参考">参考</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="介绍">介绍<a hidden class="anchor" aria-hidden="true" href="#介绍">#</a></h3>
<blockquote>
<p>Xpath全称XML Path Language，功能上使用类似路径的语法来识别和导航XML文档中的节点，同时支持HTML语言。XPath是W3C的推荐标准</p>
</blockquote>
<h3 id="nodes">Nodes<a hidden class="anchor" aria-hidden="true" href="#nodes">#</a></h3>
<blockquote>
<p>Xpath中有七种节点：</p>
<ul>
<li>element</li>
<li>attribute</li>
<li>text</li>
<li>namespace</li>
<li>processing-instruction</li>
<li>comment</li>
<li>root nodes</li>
</ul>
</blockquote>
<h3 id="句法">句法<a hidden class="anchor" aria-hidden="true" href="#句法">#</a></h3>
<h4 id="选中nodes">选中Nodes<a hidden class="anchor" aria-hidden="true" href="#选中nodes">#</a></h4>
<table>
<thead>
<tr>
<th>表达式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>nodename</td>
<td>选中所有同名节点</td>
</tr>
<tr>
<td>/</td>
<td>从root node开始选择</td>
</tr>
<tr>
<td>//</td>
<td>从当前节点开始选择，不管层级关系</td>
</tr>
<tr>
<td>.</td>
<td>选择当前节点</td>
</tr>
<tr>
<td>..</td>
<td>选择当前节点的父节点</td>
</tr>
<tr>
<td>@</td>
<td>选择属性</td>
</tr>
</tbody>
</table>
<p>举例如下</p>
<table>
<thead>
<tr>
<th style="text-align:left">表达式</th>
<th style="text-align:left">效果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">bookstore</td>
<td style="text-align:left">Selects all nodes with the name &ldquo;bookstore&rdquo;</td>
</tr>
<tr>
<td style="text-align:left">/bookstore</td>
<td style="text-align:left">Selects the root element bookstore</td>
</tr>
<tr>
<td style="text-align:left">bookstore/book</td>
<td style="text-align:left">Selects all book elements that are children of bookstore</td>
</tr>
<tr>
<td style="text-align:left">//book</td>
<td style="text-align:left">Selects all book elements no matter where they are in the document</td>
</tr>
<tr>
<td style="text-align:left">bookstore//book</td>
<td style="text-align:left">Selects all book elements that are descendant of the bookstore element, no matter where they are under the bookstore element</td>
</tr>
<tr>
<td style="text-align:left">//@lang</td>
<td style="text-align:left">Selects all attributes that are named lang</td>
</tr>
</tbody>
</table>
<h4 id="predicates-谓词">Predicates 谓词<a hidden class="anchor" aria-hidden="true" href="#predicates-谓词">#</a></h4>
<table>
<thead>
<tr>
<th style="text-align:left">Path Expression</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">/bookstore/book[1]</td>
<td style="text-align:left">Selects the first book element that is the child of the bookstore element.</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book[last()]</td>
<td style="text-align:left">Selects the last book element that is the child of the bookstore element</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book[last()-1]</td>
<td style="text-align:left">Selects the last but one book element that is the child of the bookstore element</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book[position()&lt;3]</td>
<td style="text-align:left">Selects the first two book elements that are children of the bookstore element</td>
</tr>
<tr>
<td style="text-align:left">//title[@lang]</td>
<td style="text-align:left">Selects all the title elements that have an attribute named lang</td>
</tr>
<tr>
<td style="text-align:left">//title[@lang=&lsquo;en&rsquo;]</td>
<td style="text-align:left">Selects all the title elements that have a &ldquo;lang&rdquo; attribute with a value of &ldquo;en&rdquo;</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book[price&gt;35.00]</td>
<td style="text-align:left">Selects all the book elements of the bookstore element that have a price element with a value greater than 35.00</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book[price&gt;35.00]/title</td>
<td style="text-align:left">Selects all the title elements of the book elements of the bookstore element that have a price element with a value greater than 35.00</td>
</tr>
</tbody>
</table>
<h4 id="选择未知节点">选择未知节点<a hidden class="anchor" aria-hidden="true" href="#选择未知节点">#</a></h4>
<table>
<thead>
<tr>
<th style="text-align:left">Wildcard</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">Matches any element node</td>
</tr>
<tr>
<td style="text-align:left">@*</td>
<td style="text-align:left">Matches any attribute node</td>
</tr>
<tr>
<td style="text-align:left">node()</td>
<td style="text-align:left">Matches any node of any kind</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">Path Expression</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">/bookstore/*</td>
<td style="text-align:left">Selects all the child element nodes of the bookstore element</td>
</tr>
<tr>
<td style="text-align:left">//*</td>
<td style="text-align:left">Selects all elements in the document</td>
</tr>
<tr>
<td style="text-align:left">//title[@*]</td>
<td style="text-align:left">Selects all title elements which have at least one attribute of any kind</td>
</tr>
</tbody>
</table>
<h4 id="选择多条路径">选择多条路径<a hidden class="anchor" aria-hidden="true" href="#选择多条路径">#</a></h4>
<blockquote>
<p>通过使用<code>|</code>或操作符，可以选择多条路径</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Path Expression</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">//book/title | //book/price</td>
<td style="text-align:left">Selects all the title AND price elements of all book elements</td>
</tr>
<tr>
<td style="text-align:left">//title | //price</td>
<td style="text-align:left">Selects all the title AND price elements in the document</td>
</tr>
<tr>
<td style="text-align:left">/bookstore/book/title | //price</td>
<td style="text-align:left">Selects all the title elements of the book element of the bookstore element AND all the price elements in the document</td>
</tr>
</tbody>
</table>
<h3 id="axes">Axes<a hidden class="anchor" aria-hidden="true" href="#axes">#</a></h3>
<blockquote>
<p>Axes(轴)用来表示和当前节点之间的关系，用于定位树上当前节点的关联节点</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">AxisName</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">ancestor</td>
<td style="text-align:left">Selects all ancestors (parent, grandparent, etc.) of the current node</td>
</tr>
<tr>
<td style="text-align:left">ancestor-or-self</td>
<td style="text-align:left">Selects all ancestors (parent, grandparent, etc.) of the current node and the current node itself</td>
</tr>
<tr>
<td style="text-align:left">attribute</td>
<td style="text-align:left">Selects all attributes of the current node</td>
</tr>
<tr>
<td style="text-align:left">child</td>
<td style="text-align:left">Selects all children of the current node</td>
</tr>
<tr>
<td style="text-align:left">descendant</td>
<td style="text-align:left">Selects all descendants (children, grandchildren, etc.) of the current node</td>
</tr>
<tr>
<td style="text-align:left">descendant-or-self</td>
<td style="text-align:left">Selects all descendants (children, grandchildren, etc.) of the current node and the current node itself</td>
</tr>
<tr>
<td style="text-align:left">following</td>
<td style="text-align:left">Selects everything in the document after the closing tag of the current node</td>
</tr>
<tr>
<td style="text-align:left">following-sibling</td>
<td style="text-align:left">Selects all siblings after the current node</td>
</tr>
<tr>
<td style="text-align:left">namespace</td>
<td style="text-align:left">Selects all namespace nodes of the current node</td>
</tr>
<tr>
<td style="text-align:left">parent</td>
<td style="text-align:left">Selects the parent of the current node</td>
</tr>
<tr>
<td style="text-align:left">preceding</td>
<td style="text-align:left">Selects all nodes that appear before the current node in the document, except ancestors, attribute nodes and namespace nodes</td>
</tr>
<tr>
<td style="text-align:left">preceding-sibling</td>
<td style="text-align:left">Selects all siblings before the current node</td>
</tr>
<tr>
<td style="text-align:left">self</td>
<td style="text-align:left">Selects the current node</td>
</tr>
</tbody>
</table>
<h5 id="路径定位表达式">路径定位表达式<a hidden class="anchor" aria-hidden="true" href="#路径定位表达式">#</a></h5>
<blockquote>
<ul>
<li>绝对路径以<code>/</code>开头</li>
<li>定位的语法如下：axisname::nodetest[predicate]
<ul>
<li>Axisname轴名称</li>
<li>Nodetest节点选择</li>
<li>Predicate 谓词细化选择</li>
</ul>
</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Example</th>
<th style="text-align:left">Result</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">child::book</td>
<td style="text-align:left">Selects all book nodes that are children of the current node</td>
</tr>
<tr>
<td style="text-align:left">attribute::lang</td>
<td style="text-align:left">Selects the lang attribute of the current node</td>
</tr>
<tr>
<td style="text-align:left">child::*</td>
<td style="text-align:left">Selects all element children of the current node</td>
</tr>
<tr>
<td style="text-align:left">attribute::*</td>
<td style="text-align:left">Selects all attributes of the current node</td>
</tr>
<tr>
<td style="text-align:left">child::text()</td>
<td style="text-align:left">Selects all text node children of the current node</td>
</tr>
<tr>
<td style="text-align:left">child::node()</td>
<td style="text-align:left">Selects all children of the current node</td>
</tr>
<tr>
<td style="text-align:left">descendant::book</td>
<td style="text-align:left">Selects all book descendants of the current node</td>
</tr>
<tr>
<td style="text-align:left">ancestor::book</td>
<td style="text-align:left">Selects all book ancestors of the current node</td>
</tr>
<tr>
<td style="text-align:left">ancestor-or-self::book</td>
<td style="text-align:left">Selects all book ancestors of the current node - and the current as well if it is a book node</td>
</tr>
<tr>
<td style="text-align:left">child::*/child::price</td>
<td style="text-align:left">Selects all price grandchildren of the current node</td>
</tr>
</tbody>
</table>
<h3 id="操作符">操作符<a hidden class="anchor" aria-hidden="true" href="#操作符">#</a></h3>
<blockquote>
<p>Xpath操作符可以返回如下类型的值：</p>
<ul>
<li>node-set</li>
<li>string</li>
<li>number</li>
<li>boolean</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align:left">Operator</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">|</td>
<td style="text-align:left">Computes two node-sets</td>
<td style="text-align:left">//book | //cd</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">Addition</td>
<td style="text-align:left">6 + 4</td>
</tr>
<tr>
<td style="text-align:left">-</td>
<td style="text-align:left">Subtraction</td>
<td style="text-align:left">6 - 4</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">Multiplication</td>
<td style="text-align:left">6 * 4</td>
</tr>
<tr>
<td style="text-align:left">div</td>
<td style="text-align:left">Division</td>
<td style="text-align:left">8 div 4</td>
</tr>
<tr>
<td style="text-align:left">=</td>
<td style="text-align:left">Equal</td>
<td style="text-align:left">price=9.80</td>
</tr>
<tr>
<td style="text-align:left">!=</td>
<td style="text-align:left">Not equal</td>
<td style="text-align:left">price!=9.80</td>
</tr>
<tr>
<td style="text-align:left">&lt;</td>
<td style="text-align:left">Less than</td>
<td style="text-align:left">price&lt;9.80</td>
</tr>
<tr>
<td style="text-align:left">&lt;=</td>
<td style="text-align:left">Less than or equal to</td>
<td style="text-align:left">price&lt;=9.80</td>
</tr>
<tr>
<td style="text-align:left">&gt;</td>
<td style="text-align:left">Greater than</td>
<td style="text-align:left">price&gt;9.80</td>
</tr>
<tr>
<td style="text-align:left">&gt;=</td>
<td style="text-align:left">Greater than or equal to</td>
<td style="text-align:left">price&gt;=9.80</td>
</tr>
<tr>
<td style="text-align:left">or</td>
<td style="text-align:left">or</td>
<td style="text-align:left">price=9.80 or price=9.70</td>
</tr>
<tr>
<td style="text-align:left">and</td>
<td style="text-align:left">and</td>
<td style="text-align:left">price&gt;9.00 and price&lt;9.90</td>
</tr>
<tr>
<td style="text-align:left">mod</td>
<td style="text-align:left">Modulus (division remainder)</td>
<td style="text-align:left">5 mod 2</td>
</tr>
</tbody>
</table>
<h3 id="functions函数">Functions函数<a hidden class="anchor" aria-hidden="true" href="#functions函数">#</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>name()</td>
<td>获取node的名称//[starts-with(name(), &lsquo;h&rsquo;)]</td>
</tr>
<tr>
<td>text()</td>
<td>获取node的文本//button[text()=&ldquo;Submit&rdquo;]</td>
</tr>
<tr>
<td>lang(str)</td>
<td>获取字符串的语言</td>
</tr>
<tr>
<td>count()</td>
<td>node计数//table[count(tr)=1]</td>
</tr>
<tr>
<td>position()</td>
<td>计算位置//ol/li[position()=2]</td>
</tr>
<tr>
<td>number()</td>
<td></td>
</tr>
<tr>
<td>boolean()</td>
<td></td>
</tr>
<tr>
<td>not()</td>
<td>取反button[not(starts-with(text(),&ldquo;Submit&rdquo;))]</td>
</tr>
<tr>
<td>contains()</td>
<td>字符串包含font[contains(@class,&ldquo;head&rdquo;)]</td>
</tr>
<tr>
<td>starts-with()</td>
<td>font[starts-with(@class,&ldquo;head&rdquo;)]</td>
</tr>
<tr>
<td>ends-with()</td>
<td>font[ends-with(@class,&ldquo;head&rdquo;)]</td>
</tr>
<tr>
<td>concat(x, y)</td>
<td></td>
</tr>
<tr>
<td>substring(str, start, len)</td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="浏览器使用示例">浏览器使用示例<a hidden class="anchor" aria-hidden="true" href="#浏览器使用示例">#</a></h4>
<blockquote>
<p>chrome浏览器有两种使用方法：</p>
<ul>
<li>Devtool-Elements, CTRL+F</li>
<li>Devtool-Console, <code>$x(xpath_syntax)</code></li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>案例</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>/bookstore/book/title</td>
<td>选择所有书的title</td>
</tr>
<tr>
<td>/bookstore/book[1]/title</td>
<td>选择第一本书的title</td>
</tr>
<tr>
<td>/bookstore/book/price[text()]</td>
<td>选择所有书的价格</td>
</tr>
<tr>
<td>/bookstore/book[price&gt;35]/price</td>
<td>选择价格大于35的price节点</td>
</tr>
<tr>
<td>/bookstore/book[price&gt;35]/title</td>
<td>选择价格大于35的title节点</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;//bookstore/book/title&#39;</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#ff0;font-weight:bold">4</span>) [title, title, title, title]
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;//bookstore/book[1]/title&#39;</span>)
</span></span><span style="display:flex;"><span>[title]
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;//bookstore/book[position() &gt; 2]/title&#39;</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#ff0;font-weight:bold">2</span>) [title, title]
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;//bookstore/book[price &gt; 30]/title&#39;</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#ff0;font-weight:bold">2</span>) [title, title]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[1]/price&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;30.00&#39;</span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[1]/price[text()]&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;30.00&#39;</span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[1]/price/text()&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;30.00&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[@id=&#34;testid&#34;]/title&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;Everyday Italian&#39;</span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[@class=&#34;testclass&#34;]/title&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;Harry Potter&#39;</span>
</span></span><span style="display:flex;"><span>$x(<span style="color:#0ff;font-weight:bold">&#39;.//bookstore/book[contains(@class, &#34;test&#34;)]/title&#39;</span>)[<span style="color:#ff0;font-weight:bold">0</span>].textContent
</span></span><span style="display:flex;"><span><span style="color:#0ff;font-weight:bold">&#39;Harry Potter&#39;</span>
</span></span></code></pre></div>

<p><details >
  <summary markdown="span">Xpath测试html打开开发者工具可以试验</summary>
  <?xml version="1.0" encoding="UTF-8"?>
<bookstore>
<book id="testid" category="cooking">
  <title lang="en">Everyday Italian</title>
  <author>Giada De Laurentiis</author>
  <year>2005</year>
  <price>30.00</price>
</book>
<book class="testclass" category="children">
  <title lang="en" href="test.pdf">Harry Potter</title>
  <author>J K. Rowling</author>
  <year>2005</year>
  <price>29.99</price>
</book>
<book category="web">
  <title lang="en" href="/test">XQuery Kick Start</title>
  <author>James McGovern</author>
  <author>Per Bothner</author>
  <author>Kurt Cagle</author>
  <author>James Linn</author>
  <author>Vaidyanathan Nagarajan</author>
  <year>2003</year>
  <price>49.99</price>
</book>
<book category="web">
  <title lang="en" href="https://www.google.com">Learning XML</title>
  <author>Erik T. Ray</author>
  <year>2003</year>
  <price>39.95</price>
</book>
</bookstore>
<div class="highlight"><pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#0f0;font-weight:bold">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">bookstore</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">book</span> <span style="color:#007f7f">id</span>=<span style="color:#0ff;font-weight:bold">&#34;testid&#34;</span> <span style="color:#007f7f">category</span>=<span style="color:#0ff;font-weight:bold">&#34;cooking&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span>&gt;Everyday Italian&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;Giada De Laurentiis&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">year</span>&gt;2005&lt;/<span style="font-weight:bold">year</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">price</span>&gt;30.00&lt;/<span style="font-weight:bold">price</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">book</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">book</span> <span style="color:#007f7f">class</span>=<span style="color:#0ff;font-weight:bold">&#34;testclass&#34;</span> <span style="color:#007f7f">category</span>=<span style="color:#0ff;font-weight:bold">&#34;children&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span> <span style="color:#007f7f">href</span>=<span style="color:#0ff;font-weight:bold">&#34;test.pdf&#34;</span>&gt;Harry Potter&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;J K. Rowling&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">year</span>&gt;2005&lt;/<span style="font-weight:bold">year</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">price</span>&gt;29.99&lt;/<span style="font-weight:bold">price</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">book</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">book</span> <span style="color:#007f7f">category</span>=<span style="color:#0ff;font-weight:bold">&#34;web&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span> <span style="color:#007f7f">href</span>=<span style="color:#0ff;font-weight:bold">&#34;/test&#34;</span>&gt;XQuery Kick Start&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;James McGovern&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;Per Bothner&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;Kurt Cagle&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;James Linn&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;Vaidyanathan Nagarajan&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">year</span>&gt;2003&lt;/<span style="font-weight:bold">year</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">price</span>&gt;49.99&lt;/<span style="font-weight:bold">price</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">book</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="font-weight:bold">book</span> <span style="color:#007f7f">category</span>=<span style="color:#0ff;font-weight:bold">&#34;web&#34;</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">title</span> <span style="color:#007f7f">lang</span>=<span style="color:#0ff;font-weight:bold">&#34;en&#34;</span> <span style="color:#007f7f">href</span>=<span style="color:#0ff;font-weight:bold">&#34;https://www.google.com&#34;</span>&gt;Learning XML&lt;/<span style="font-weight:bold">title</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">author</span>&gt;Erik T. Ray&lt;/<span style="font-weight:bold">author</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">year</span>&gt;2003&lt;/<span style="font-weight:bold">year</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="font-weight:bold">price</span>&gt;39.95&lt;/<span style="font-weight:bold">price</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">book</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;/<span style="font-weight:bold">bookstore</span>&gt;
</span></span></code></pre></div>
</details></p>

<h3 id="参考">参考<a hidden class="anchor" aria-hidden="true" href="#参考">#</a></h3>
<p><a href="https://devhints.io/xpath?utm_source=pocket_saves">Xpath cheatsheet</a></p>
<p><a href="https://www.w3schools.com/xml/xpath_intro.asp">XPath Tutorial</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://blog.niuhemoon.win/tags/xpath/">Xpath</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://blog.niuhemoon.win/posts/tech/text2sql-prompt-engineering/">
    <span class="title">« 上一页</span>
    <br>
    <span>text2sql Prompt 调优笔记</span>
  </a>
  <a class="next" href="https://blog.niuhemoon.win/posts/read/%E9%98%85%E8%AF%BB%E8%AE%B0%E5%BD%952023/">
    <span class="title">下一页 »</span>
    <br>
    <span>阅读记录2023</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://blog.niuhemoon.win">Niuhe&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '📄复制';

        function copyingDone() {
            copybutton.innerHTML = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerHTML = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
